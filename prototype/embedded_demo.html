<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>嵌入式演示 - 安全生产AI助手</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
</head>

<body class="embedded-mode">
    <div class="fake-app-bg">
        第三方业务系统 (ERP/OA/监控)
    </div>

    <!-- Embedded Sidebar -->
    <div class="embedded-sidebar">
        <div class="chat-header">
            <div class="chat-title">
                <i class="ph ph-sparkle" style="color:var(--primary-color); margin-right:8px"></i>AI 助手
            </div>
            <div class="chat-actions">
                <button class="icon-btn" title="最小化" onclick="alert('最小化功能')"><i class="ph ph-minus"></i></button>
                <button class="icon-btn" title="关闭"><i class="ph ph-x"></i></button>
            </div>
        </div>

        <div class="chat-messages" id="chat-messages-container" style="background:#fff">
            <div class="message ai">
                <div class="message-avatar"><i class="ph ph-robot"></i></div>
                <div class="message-content">
                    您好，检测到您正在查看【设备维护台账】页面。<br><br>
                    您可以问我：<br>
                    1. 检查该设备的维修历史<br>
                    2. 查询相关安全操作规程<br>
                    3. 上传设备异常照片进行分析
                </div>
            </div>
        </div>

        <div class="chat-input-area">
            <div class="input-wrapper">
                <textarea class="chat-input" placeholder="输入问题或选中内容..." style="min-height:40px"></textarea>
                <div class="input-actions">
                    <div class="input-tools">
                        <button class="icon-btn"><i class="ph ph-link"></i></button>
                        <button class="icon-btn"><i class="ph ph-image"></i></button>
                    </div>
                    <button class="send-btn" id="send-msg-btn">
                        <i class="ph ph-paper-plane-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simple script to mimic the chat interaction from the main app
        const btn = document.getElementById('send-msg-btn');
        const container = document.getElementById('chat-messages-container');
        const input = document.querySelector('.chat-input');

        if (btn && input) {
            btn.addEventListener('click', () => {
                const text = input.value;
                if (!text.trim()) return;

                const userMsg = document.createElement('div');
                userMsg.className = 'message user';
                userMsg.innerHTML = `<div class="message-content">${text}</div>`;
                container.appendChild(userMsg);
                input.value = '';
                container.scrollTop = container.scrollHeight;

                setTimeout(() => {
                    const aiMsg = document.createElement('div');
                    aiMsg.className = 'message ai';
                    aiMsg.innerHTML = `
                        <div class="message-avatar"><i class="ph ph-robot"></i></div>
                         <div class="message-content">正在分析当前上下文...<br>（这是嵌入式模式演示）</div>
                    `;
                    container.appendChild(aiMsg);
                    container.scrollTop = container.scrollHeight;
                }, 800);
            });
        }
    </script>
</body>

</html>