
## 一、产品概述

### 1.1 产品定位

安全生产AI助手是一款基于大语言模型的智能生产力工具，通过对话式交互和智能分析能力，帮助企业提升安全生产管理效率。产品采用"AI能力+轻量级数据管理"的设计理念，不替代业务系统，而是作为AI能力增强工具，可独立使用也可嵌入现有系统。

**核心价值主张：**

- 用对话完成工作：通过自然语言交互完成各类安全生产任务

- 智能分析辅助：AI自动识别隐患、分析数据、生成内容

- 轻量化管理：提供必要的数据台账，不做复杂业务流程

- 灵活集成：支持独立部署或作为能力组件嵌入

### 1.2 目标用户

**主要用户角色：**

1. **安全管理员**

   - 使用场景：日常隐患管理、数据统计分析、报告生成

   - 核心需求：快速记录隐患、统计分析、导出报表

2. **现场安全员**

   - 使用场景：现场巡检、隐患拍照识别、整改建议查询

   - 核心需求：移动端快速记录、AI辅助判断

3. **培训管理员**

   - 使用场景：课件制作、试题编写、题库管理

   - 核心需求：快速生成培训材料、智能组卷

4. **监控专员**

   - 使用场景：监控画面分析、违章识别、证据记录

   - 核心需求：AI辅助判断违章、快速生成记录

5. **管理层**

   - 使用场景：数据查询、趋势分析、决策支持

   - 核心需求：智能数据分析、可视化报表

### 1.3 产品边界

**产品做什么：**\
✅ AI智能分析（隐患识别、知识问答、数据分析、内容生成）\
✅ 轻量级数据台账（隐患记录、题库、培训材料、相关方档案）\
✅ 统计分析和报告生成\
✅ 数据导出和API集成

**产品不做什么：**\
❌ 业务审批流程（隐患审批、任务派发、整改跟踪）\
❌ 组织人员管理（培训计划、考试组织、成绩管理）\
❌ 复杂业务闭环（验收管理、绩效考核）

## 二、产品架构设计

### 2.1 整体架构图

```plaintext
┌─────────────────────────────────────────────────────────────┐
│                       用户交互层                              │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │  智能对话    │  │ 内容创作中心  │  │  数据台账    │     │
│  │   模块       │  │              │  │              │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                       业务能力层                              │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │  场景分析    │  │  统计管理    │  │  系统管理    │     │
│  │  能力        │  │              │  │              │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                       AI能力层                                │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │  视觉分析    │  │  知识问答    │  │  内容生成    │     │
│  │  模块        │  │  模块        │  │  模块        │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
│                  ┌──────────────┐                           │
│                  │  数据洞察    │                           │
│                  │  分析模块    │                           │
│                  └──────────────┘                           │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                       数据存储层                              │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │  隐患台账    │  │  题库数据    │  │  培训材料    │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │  相关方档案  │  │  生成文档    │  │  用户配置    │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
└─────────────────────────────────────────────────────────────┘
```

### 2.2 功能模块架构

#### 2.2.1 一级模块划分

```plaintext
安全生产AI助手
├── 智能对话模块（核心交互入口）
├── 内容创作中心（深度创作场景）
├── 场景分析能力（多场景AI分析）
├── 数据台账（数据管理）
├── 统计管理（分析报表）
└── 系统管理（基础配置）
```

#### 2.2.2 模块关系说明

**智能对话模块** - 产品核心入口

- 作用：统一的AI交互界面

- 特点：支持所有场景的对话式操作

- 关系：可调用所有AI能力和数据台账

**内容创作中心** - 深度创作工具

- 作用：针对课件、文档等复杂内容创作

- 特点：提供画布式编辑界面

- 关系：从智能对话延伸，支持更精细的内容编辑

**场景分析能力** - 多场景支持

- 作用：支持隐患识别、培训辅助、相关方管理等场景

- 特点：通过对话模块统一交互，无需独立界面

- 关系：调用AI能力，结果存入数据台账

**数据台账** - 数据管理中心

- 作用：存储和管理所有AI生成的数据

- 特点：轻量级设计，支持查询和导出

- 关系：为统计管理提供数据源

**统计管理** - 数据分析展示

- 作用：提供专业的统计分析和可视化

- 特点：针对三大场景的深度分析

- 关系：基于数据台账进行统计和分析

**系统管理** - 基础配置

- 作用：用户、权限、知识库等基础管理

- 特点：支撑产品运行的底层配置

- 关系：为所有模块提供基础服务

## 三、核心模块详细设计

### 3.1 智能对话模块

#### 3.1.1 模块定位

智能对话模块是产品的**核心交互入口**，用户通过对话方式完成所有AI任务。设计理念：让用户像和专家对话一样与AI交互，无需学习复杂操作。

#### 3.1.2 功能组成

**对话框（Chat Box）**

**输入方式：**

- 文字输入：键盘输入文字描述

- 语音输入：语音转文字，支持方言识别

- 图片上传：拍照或选择图片上传

- 视频上传：录制或选择视频片段

- 文件上传：支持PDF、Word、Excel等文档

- @提及：@特定知识库或功能模块

**输出方式：**

- 文字回复：结构化的分析结果

- 图表展示：统计图表、趋势分析

- 文档生成：课件、报告等可下载文件

- 操作建议：快捷操作按钮（保存、导出、继续分析等）

**智能光标(Smart Cursor)**

跨系统数据采集能力，支持从第三方系统快速传递内容到AI助手：

**功能说明：**

- 浏览器插件或桌面工具，支持跨应用数据采集

- 用户在任意系统/网站选中文字、表单、图片等内容

- 通过快捷键或右键菜单快速传递到AI助手输入框

- AI助手自动理解上下文，提供智能分析和处理

**典型使用场景：**

- 从监控平台传递违规画面和时间信息，AI生成违规记录

- 从OA系统传递审批内容，AI辅助审核并生成意见

- 从Excel表格选中数据，AI批量解析并录入台账

- 从第三方系统复制设备信息，AI分析隐患并给出建议

**快捷操作(Quick Actions)**

在对话框内预设的场景启动器，点击即可快速启动特定场景的对话：

```plaintext
┌─────────────────────────────────────────┐
│           快捷操作（快捷入口）            │
├─────────────────────────────────────────┤
│  [📷 拍照识别隐患]  [📊 数据分析]       │
│  [📝 生成课件]      [🔍 法规查询]       │
│  [👥 资质审核]      [📹 监控分析]       │
└─────────────────────────────────────────┘
```

**对话历史**

- 会话列表：显示历史对话记录

- 会话管理：重命名、删除、收藏会话

- 快速检索：按时间、关键词搜索历史对话

- 上下文保持：同一会话保持上下文连续性

#### 3.1.3 交互设计

**典型交互流程：**

```plaintext
用户 → 输入问题/上传文件
  ↓
AI → 理解意图，调用相应能力
  ↓
AI → 返回结构化结果 + 操作建议
  ↓
用户 → 选择后续操作（保存/继续/导出）
  ↓
系统 → 执行操作，更新数据台账
```

**界面布局（Web端）：**

```plaintext
┌──────────────────────────────────────────────────────────────┐
│  Logo  [首页] [对话] [创作] [台账] [统计] [设置]  [用户头像]  │
├──────────────────────────────────────────────────────────────┤
│        │                                                      │
│  会话   │                    对话内容区                        │
│  列表   │  ┌────────────────────────────────────────────┐   │
│        │  │  AI: 您好，我可以帮您...                    │   │
│  今天   │  └────────────────────────────────────────────┘   │
│  □ 隐患 │  ┌────────────────────────────────────────────┐   │
│  □ 课件 │  │  用户: 帮我识别这张照片的隐患               │   │
│        │  └────────────────────────────────────────────┘   │
│  昨天   │  ┌────────────────────────────────────────────┐   │
│  □ 分析 │  │  AI: [图片识别结果]                        │   │
│        │  │  [保存隐患] [查看建议] [继续分析]          │   │
│        │  └────────────────────────────────────────────┘   │
│        │                                                      │
│        │  ┌─────────快捷操作─────────┐                      │
│        │  │ [📷] [📊] [📝] [🔍] [👥] │                      │
│        │  └─────────────────────────┘                      │
│        │                                                      │
│        │  ┌────────────────────────────────────────────┐   │
│        │  │ [图片] [文件] [语音] 输入框...  [发送]      │   │
│        │  └────────────────────────────────────────────┘   │
└──────────────────────────────────────────────────────────────┘
```

**界面布局（移动端）：**

```plaintext
┌──────────────────────────┐
│  ← 安全生产AI助手    ☰   │
├──────────────────────────┤
│                          │
│  AI: 您好，我可以帮您... │
│                          │
│  用户: [上传的照片]      │
│                          │
│  AI: 识别到以下隐患：    │
│  1. 未戴安全帽           │
│  2. ...                  │
│                          │
│  [保存记录] [查看详情]   │
│                          │
├─────────快捷操作─────────┤
│ 📷     📊     📝     🔍  │
│ 拍照   分析   课件   查询 │
├──────────────────────────┤
│ [📎] [🎤] 输入框... [➤] │
└──────────────────────────┘
```

#### 3.1.4 技术实现要点

**对话状态管理：**

- 会话ID：每次对话分配唯一ID

- 上下文维护：保存对话历史，支持多轮对话

- 意图识别：基于NLU识别用户意图，路由到对应场景

- 槽位填充：缺少必要信息时，引导用户补充

**文件处理：**

- 图片：支持JPG/PNG格式，最大10MB

- 视频：支持MP4格式，最大100MB，自动压缩

- 文档：支持PDF/Word/Excel，最大50MB

- 预处理：自动格式转换、OCR识别、内容提取

**响应优化：**

- 流式输出：文字内容流式返回，提升体验

- 异步处理：大文件/复杂分析异步处理，实时反馈进度

- 结果缓存：相同内容缓存结果，加快响应

### 3.2 场景分析能力

#### 3.2.1 模块定位

产品通过统一的智能对话模块支持多种分析场景，用户无需学习复杂的专项流程，所有场景都通过对话方式完成。系统根据用户输入的内容类型（图片、文档、表格等）和描述，自动识别场景并调用相应的AI能力。

#### 3.2.2 核心分析场景

**智能隐患分析**

- 现场图片识别：上传照片，AI识别安全隐患

- 检查表单解析：拍摄纸质表单，自动提取数据

- 监控画面分析：上传监控截图/视频，识别违章行为

- 隐患数据分析：对话式查询和分析历史隐患数据

**教育培训辅助**

- 培训课件生成：描述需求，AI生成完整课件

- 试题批量生成：指定主题和数量，批量生成试题

- 智能组卷：根据条件从题库智能抽题组卷

- 题库管理：题库统计、质量分析等

**相关方管理**

- 资质材料审核：上传资质文件，AI智能审核

- 安全协议生成：输入基本信息，AI生成标准协议

- 合规性分析：查询相关方合规情况和风险预警

**实现机制：**

所有场景均通过智能对话模块的统一交互完成：

- 用户在对话框输入/上传内容

- AI识别场景类型和用户意图

- 调用相应的AI能力进行分析

- 返回结构化结果和后续操作建议

- 用户确认后保存到相应的数据台账

**设计原则：**

- 统一交互：避免为每个场景设计独立界面

- 对话驱动：通过自然语言引导完成任务

- 灵活扩展：新增场景不增加交互复杂度

- 降低门槛：用户无需学习多套操作流程

## 三、核心模块详细设计

### 3.3 内容创作中心

#### 3.3.1 模块定位

内容创作中心是针对**复杂内容创作**的深度工具，提供画布式编辑界面，支持培训课件、分析报告等内容的精细化创作和编辑。

与智能对话的区别：

- 智能对话：快速生成，即问即答

- 内容创作中心：深度编辑，精雕细琢

#### 3.3.2 功能组成

**创作画布（Canvas）**

**画布类型：**

- PPT课件画布：幻灯片式编辑

- 长文档画布：Word式文档编辑

- 报告画布：结构化报告编辑

**核心功能：**

- 所见即所得编辑

- 拖拽式布局调整

- 多媒体插入（图片、图表、视频）

- 模板应用

- 样式编辑

**智能对话（侧边栏）**

在创作过程中可随时调用AI助手：

- 内容生成："帮我写这一段的内容"

- 内容优化："帮我优化这段文字"

- 内容扩展："把这一点展开详细讲解"

- 素材查找："找一些相关案例"

**功能区（Toolbar）**

**基础功能：**

- 保存/另存为

- 导出（PPT/Word/PDF）

- 打印预览

- 版本历史

**编辑功能：**

- 文本格式（字体、大小、颜色、对齐）

- 段落格式（缩进、行距、项目符号）

- 插入元素（图片、表格、图表、视频）

- 页面设置（页边距、页眉页脚、页码）

**AI辅助功能：**

- 智能美化：一键优化排版和配色

- 智能配图：根据内容自动匹配图片

- 智能润色：优化文字表达

- 智能翻译：多语言翻译

#### 3.3.3 界面设计

```plaintext
┌───────────────────────────────────────────────────────────────┐
│  Logo  消防安全培训课件  [保存] [导出▼] [分享]      [用户头像] │
├───────────────────────────────────────────────────────────────┤
│  [文件] [编辑] [插入] [设计] [AI助手]                         │
│  ─────────────────────────────────────────────────────────────│
│  [字体▼] [大小▼] [B] [I] [U] [颜色] [对齐] [...更多]          │
├─────┬─────────────────────────────────────────────┬───────────┤
│     │                                             │           │
│  幻灯│              【创作画布】                   │ AI助手    │
│  片列│                                             │           │
│  表  │   ┌───────────────────────────────┐       │ 💬"帮我   │
│     │   │                               │       │ 生成下一   │
│  1. │   │     消防安全培训               │       │ 页的内容" │
│  封面│   │                               │       │           │
│     │   │    主讲：XXX                  │       │ [发送]    │
│  2. │   │                               │       │           │
│  目录│   │                               │       │ ──────── │
│     │   └───────────────────────────────┘       │           │
│  3. │                                             │ 💡建议：  │
│  基础│   [添加文本] [插入图片] [插入图表]         │           │
│  知识│                                             │ • 增加案例│
│     │                                             │ • 配图建议│
│  4. │                                             │ • ...     │
│  ...│                                             │           │
│     │                                             │           │
├─────┴─────────────────────────────────────────────┴───────────┤
│  第2页 / 共30页            [<] [>] [缩放: 100%▼]               │
└───────────────────────────────────────────────────────────────┘
```

#### 3.3.4 典型使用场景

**场景：从AI生成进入深度编辑**

```plaintext
步骤1：智能对话生成初稿
  └→ 用户："生成一份消防安全培训课件"
  └→ AI生成30页PPT初稿

步骤2：预览并进入编辑
  └→ 点击"编辑课件"
  └→ 自动打开内容创作中心

步骤3：精细化编辑
  └→ 调整页面布局
  └→ 替换图片素材
  └→ 修改文字内容
  └→ 统一样式风格

步骤4：AI辅助优化
  └→ 侧边栏对话："帮我优化第5页的内容"
  └→ AI提供修改建议或直接优化

步骤5：保存和导出
  └→ 保存到培训材料库
  └→ 导出PPT文件
```

#### 3.3.5 技术实现要点

**画布技术选型：**

- Web端：基于Canvas/SVG的富文本编辑器

- 移动端：简化版编辑器，主要支持查看和简单修改

**文档格式转换：**

- 内部格式：自定义JSON结构存储

- 导出格式：转换为PPT/Word/PDF

- 导入支持：解析PPT/Word导入编辑

**实时协作（未来扩展）：**

- WebSocket实时同步

- 冲突检测和合并

- 版本控制

**AI集成：**

- 侧边栏对话独立于主画布

- 支持选中内容后调用AI处理

- AI生成内容插入当前光标位置

### 3.4 数据台账模块

#### 3.4.1 模块定位

数据台账是产品的**数据管理中心**，采用轻量级设计，存储AI生成的各类数据，支持查询、统计和导出，但不做复杂的业务流程管理。

#### 3.4.2 台账清单

**1. 隐患台账**

**数据结构：**

```plaintext
隐患记录
├── 基础信息
│   ├── 隐患编号
│   ├── 发现时间
│   ├── 发现人
│   ├── 发现方式（现场检查/监控/表单识别）
│   └── 所属区域
├── 隐患描述
│   ├── 隐患标题
│   ├── 详细描述
│   ├── 隐患类型（人员防护/设备设施/现场管理等）
│   └── 风险等级（严重/中等/轻微）
├── 证据材料
│   ├── 原始照片
│   ├── 识别结果图（标注位置）
│   └── 视频片段（如有）
├── 分析结果
│   ├── 法规依据
│   ├── 潜在后果
│   ├── 整改建议
│   └── 验收标准
└── 标签分类
    ├── 自动标签（AI生成）
    └── 手工标签（用户添加）
```

**列表展示：**

```plaintext
┌──────────────────────────────────────────────────────────────┐
│  隐患台账  [+新增] [导入] [导出]          🔍[搜索...]  [筛选▼]│
├──────────────────────────────────────────────────────────────┤
│  [全部] [严重] [中等] [轻微]    时间: [本月▼]  区域: [全部▼] │
├──────────────────────────────────────────────────────────────┤
│ 序号 │ 编号        │ 标题      │ 类型    │ 等级 │ 时间      │操作│
├──────┼─────────────┼───────────┼─────────┼──────┼───────────┼────┤
│ 1    │HZ20241219001│高处作业未 │人员防护 │🔴严重│12-19 14:30│详情│
│      │             │系安全带   │         │      │           │编辑│
├──────┼─────────────┼───────────┼─────────┼──────┼───────────┼────┤
│ 2    │HZ20241219002│消防通道堵 │现场管理 │🟡中等│12-19 14:20│详情│
│      │             │塞         │         │      │           │编辑│
├──────┼─────────────┼───────────┼─────────┼──────┼───────────┼────┤
│ ...  │             │           │         │      │           │    │
└──────────────────────────────────────────────────────────────┘
│ 共156条记录  第1页/共16页          [<] [1] [2] [3] ... [>]    │
└──────────────────────────────────────────────────────────────┘
```

**详情页面：**

```plaintext
┌──────────────────────────────────────────────────────────────┐
│  ← 返回列表       隐患详情                        [编辑][导出]│
├──────────────────────────────────────────────────────────────┤
│  【基础信息】                                                 │
│  隐患编号：HZ20241219001                                      │
│  发现时间：2024-12-19 14:30                                   │
│  发现人：  张三（安全员）                                      │
│  发现方式：现场检查                                            │
│  所属区域：A车间-西侧                                          │
│                                                              │
│  【隐患描述】                                                 │
│  隐患标题：高处作业人员未系安全带                             │
│  隐患类型：人员防护不到位                                      │
│  风险等级：🔴 严重                                            │
│  详细描述：脚手架第三层（高度约8米）有1名工人正在作业，       │
│            未系安全带，存在坠落风险。                         │
│                                                              │
│  【证据材料】                                                 │
│  [照片1] [照片2-标注图]                                       │
│                                                              │
│  【AI分析结果】                                               │
│  潜在后果：高处坠落可能造成重伤或死亡事故                     │
│  法规依据：《高处作业安全技术规范》GB/T 3608-2008 第6.2条    │
│  整改建议：                                                   │
│    1. 立即责令停工                                            │
│    2. 系好安全带后方可继续作业                                │
│    3. 对该工人进行安全教育                                    │
│  验收标准：安全带系挂正确，作业过程全程佩戴                   │
│                                                              │
│  【标签】                                                     │
│  #高处作业 #未系安全带 #A车间 #严重隐患                       │
│                                                              │
│  [生成整改通知] [关联类似隐患] [分享]                         │
└──────────────────────────────────────────────────────────────┘
```

**2. 检查记录台账**

**数据结构：**

```plaintext
检查记录
├── 基础信息
│   ├── 检查编号
│   ├── 检查时间
│   ├── 检查人
│   ├── 检查类型（日检/周检/月检/专项检查）
│   └── 检查区域
├── 检查内容
│   ├── 检查项目（结构化数据）
│   ├── 检查结果（合格/不合格/不适用）
│   ├── 不合格项明细
│   └── 原始表单图片（如有）
└── 统计信息
    ├── 检查项总数
    ├── 合格项数量
    ├── 不合格项数量
    └── 合格率
```

**3. 题库**

**数据结构：**

```plaintext
题目
├── 基础信息
│   ├── 题目编号
│   ├── 题干
│   ├── 题型（单选/多选/判断/简答/案例分析）
│   └── 创建时间
├── 题目内容
│   ├── 选项（如适用）
│   ├── 答案
│   ├── 解析
│   └── 法规依据
├── 分类标签
│   ├── 知识点（消防/电气/机械/...）
│   ├── 难度（基础/中等/较难）
│   └── 适用对象（管理人员/操作工/新员工）
└── 使用记录
    ├── 使用次数
    ├── 最后使用时间
    ├── 正确率（如有数据）
    └── 区分度（如有数据）
```

**列表展示：**

```plaintext
┌──────────────────────────────────────────────────────────────┐
│  题库  [+添加题目] [批量生成] [导入] [导出]    🔍[搜索...]    │
├──────────────────────────────────────────────────────────────┤
│  [全部] [单选] [多选] [判断] [简答]  知识点:[消防▼] 难度:[全部▼]│
├──────────────────────────────────────────────────────────────┤
│ 序号 │ 题型 │ 题干预览              │ 知识点 │ 难度 │ 使用次数 │操作│
├──────┼──────┼───────────────────────┼────────┼──────┼──────────┼────┤
│ 1    │单选  │安全帽使用年限一般为？ │消防    │基础  │23        │详情│
│      │      │                       │        │      │          │编辑│
├──────┼──────┼───────────────────────┼────────┼──────┼──────────┼────┤
│ 2    │多选  │以下属于灭火器类型的是 │消防    │基础  │18        │详情│
│      │      │                       │        │      │          │编辑│
├──────┼──────┼───────────────────────┼────────┼──────┼──────────┼────┤
│ ...  │      │                       │        │      │          │    │
└──────────────────────────────────────────────────────────────┘
│ 共856道题  第1页/共86页          [<] [1] [2] [3] ... [>]      │
└──────────────────────────────────────────────────────────────┘
│  [智能组卷]  [批量导出选中题目]                               │
└──────────────────────────────────────────────────────────────┘
```

**4. 培训材料库**

**数据结构：**

```plaintext
培训材料
├── 基础信息
│   ├── 材料编号
│   ├── 材料标题
│   ├── 材料类型（PPT课件/讲师演讲稿/学员手册/视频教程）
│   ├── 创建时间
│   └── 创建方式（AI生成/手工上传）
├── 内容信息
│   ├── 培训主题
│   ├── 适用对象
│   ├── 建议时长
│   └── 知识点标签
├── 文件信息
│   ├── 文件格式
│   ├── 文件大小
│   ├── 页数/时长
│   └── 文件路径
└── 使用记录
    ├── 下载次数
    ├── 最后使用时间
    └── 评分（可选）
```

**5. 相关方档案**

**数据结构：**

```plaintext
相关方档案
├── 基本信息
│   ├── 相关方名称
│   ├── 相关方类型（承包商/供应商/劳务公司）
│   ├── 联系人
│   ├── 联系电话
│   └── 统一社会信用代码
├── 资质材料（原始文件）
│   ├── 营业执照
│   ├── 资质证书
│   ├── 安全生产许可证
│   ├── 人员证件
│   └── 安全管理制度
├── 审核记录
│   ├── 审核时间
│   ├── 审核人
│   ├── 审核结论（合格/不合格/待补充）
│   ├── 合格项
│   ├── 不合格项
│   └── 审核报告
├── 协议文档
│   ├── 安全管理协议
│   ├── 附件清单
│   └── 签署状态
└── 评价信息
    ├── 风险评级
    ├── 合规情况
    └── 到期提醒
```

**6. AI生成文档库**

**数据结构：**

```plaintext
AI文档
├── 基础信息
│   ├── 文档编号
│   ├── 文档标题
│   ├── 文档类型（整改通知/安全协议/分析报告/培训课件等）
│   ├── 生成时间
│   └── 生成场景
├── 关联信息
│   ├── 关联隐患记录（如适用）
│   ├── 关联相关方（如适用）
│   └── 关联培训计划（如适用）
├── 文件信息
│   ├── 文件格式（Word/PDF）
│   ├── 文件大小
│   └── 文件路径
└── 版本管理
    ├── 版本号
    ├── 修改记录
    └── 历史版本
```

#### 3.4.3 台账通用功能

**查询功能：**

- 关键词搜索：支持全文检索

- 高级筛选：多条件组合筛选

- 快速筛选：预设常用筛选条件（本周/本月/我创建的等）

- 自然语言查询：通过对话方式查询数据

**统计功能：**

- 数量统计：按时间/类型/等级统计数量

- 趋势分析：显示数量变化趋势

- 分布分析：饼图/柱状图展示分布情况

- 排名统计：高频问题TOP10

**导出功能：**

- 单条导出：导出单条记录为Word/PDF

- 批量导出：批量导出为Excel清单

- 自定义导出：选择导出字段和格式

- 定时导出：设置定时任务自动导出（如每周一导出上周数据）

**导入功能：**

- Excel导入：批量导入历史数据

- 模板下载：提供标准导入模板

- 数据校验：导入时自动校验数据格式

- 错误提示：导入失败时给出具体错误原因

### 3.5 统计管理模块

#### 3.5.1 模块定位

统计管理模块提供针对三大核心场景的**专业数据分析和可视化**，帮助管理人员全面了解安全生产状况，发现问题趋势，支持决策。

与数据台账的区别：

- 数据台账：原始数据管理，查询和导出

- 统计管理：数据分析和可视化，洞察和决策

#### 3.5.2 三大分析场景

**1. 智能隐患分析**

**分析维度：**

**按时间维度：**

- 隐患数量趋势（日/周/月/年）

- 环比/同比分析

- 隐患发现高峰时段

- 季节性规律分析

**按空间维度：**

- 各区域隐患数量对比

- 隐患热力图

- 高风险区域识别

- 区域改进趋势

**按类型维度：**

- 隐患类型分布（人员/设备/现场/管理）

- 高频隐患排名TOP10

- 严重隐患占比

- 隐患类型变化趋势

**按来源维度：**

- 发现方式分布（现场检查/监控/表单识别）

- 各发现方式的效率对比

- 检查人员发现隐患数量排名

**典型界面：**

```plaintext
┌──────────────────────────────────────────────────────────────┐
│  智能隐患分析                         时间范围: [本月▼]       │
├──────────────────────────────────────────────────────────────┤
│  【数据概览】                                                 │
│  ┌─────────────┬─────────────┬─────────────┬─────────────┐  │
│  │ 隐患总数    │ 严重隐患    │ 平均处理时间│ 整改完成率  │  │
│  │ 156 (+12%)  │ 23 (-8%)    │ 2.3天       │ 89%         │  │
│  └─────────────┴─────────────┴─────────────┴─────────────┘  │
│                                                              │
│  【隐患趋势分析】                                             │
│  ┌────────────────────────────────────────────────────────┐ │
│  │ 160│                                             ╱╲    │ │
│  │ 140│                                    ╱╲      ╱  ╲   │ │
│  │ 120│                           ╱╲     ╱  ╲    ╱    ╲  │ │
│  │ 100│                  ╱╲      ╱  ╲   ╱    ╲  ╱      ╲ │ │
│  │  80│         ╱╲      ╱  ╲    ╱    ╲ ╱      ╲╱        │ │
│  │  60│    ╱╲  ╱  ╲    ╱    ╲  ╱      ╲                 │ │
│  │  40│   ╱  ╲╱    ╲  ╱      ╲╱                         │ │
│  │  20│  ╱          ╲╱                                   │ │
│  │   0│─────────────────────────────────────────────────│ │
│  │     1月  2月  3月  4月  5月  6月  7月  8月  9月 10月  │ │
│  └────────────────────────────────────────────────────────┘ │
│  ──严重隐患  ──一般隐患  ──轻微隐患                          │
│                                                              │
│  【隐患类型分布】          【高频隐患TOP5】                   │
│  ┌──────────────────┐    ┌──────────────────────────────┐  │
│  │   人员防护 35%   │    │ 1. 未佩戴安全帽      42次    │  │
│  │   设备设施 28%   │    │ 2. 消防设施问题      28次    │  │
│  │   现场管理 22%   │    │ 3. 现场整理不规范    23次    │  │
│  │   制度执行 15%   │    │ 4. 电气隐患          19次    │  │
│  └──────────────────┘    │ 5. 高处作业防护      15次    │  │
│                          └──────────────────────────────┘  │
│                                                              │
│  [查看详细数据] [导出报告] [对话分析]                         │
└──────────────────────────────────────────────────────────────┘
```

**2. 教育培训分析**

**分析维度：**

**题库分析：**

- 题库总量和结构

- 各知识点题目数量分布

- 题型分布

- 难度分布

- 题目使用频率分析

- 高质量题目识别

**培训材料分析：**

- 材料总量和类型分布

- 各主题材料数量

- 材料使用频率

- 材料质量评价

**内容生成分析：**

- 生成次数统计

- 生成类型分布（课件/试题/手册）

- 生成效率分析

**典型界面：**

```plaintext
┌──────────────────────────────────────────────────────────────┐
│  教育培训分析                         时间范围: [本月▼]       │
├──────────────────────────────────────────────────────────────┤
│  【数据概览】                                                 │
│  ┌─────────────┬─────────────┬─────────────┬─────────────┐  │
│  │ 题库总量    │ 培训材料    │ 本月生成    │ 材料使用率  │  │
│  │ 856题       │ 45套        │ 12套        │ 78%         │  │
│  └─────────────┴─────────────┴─────────────┴─────────────┘  │
│                                                              │
│  【题库结构分析】                                             │
│  ┌────────────────────────────────────────────────────────┐ │
│  │ 知识点分布            题型分布            难度分布       │ │
│  │ ├─ 消防 256题        ├─ 单选 420题      ├─ 基础 580题  │ │
│  │ ├─ 电气 198题        ├─ 多选 245题      ├─ 中等 210题  │ │
│  │ ├─ 机械 165题        ├─ 判断 136题      └─ 较难  66题  │ │
│  │ ├─ 化工 142题        └─ 简答  55题                      │ │
│  │ └─ 其他  95题                                            │ │
│  └────────────────────────────────────────────────────────┘ │
│                                                              │
│  【材料生成趋势】                                             │
│  ┌────────────────────────────────────────────────────────┐ │
│  │  15│                                            ▓▓▓     │ │
│  │  12│                                   ▓▓▓     ▓▓▓     │ │
│  │   9│                          ▓▓▓     ▓▓▓     ▓▓▓     │ │
│  │   6│                 ▓▓▓     ▓▓▓     ▓▓▓     ▓▓▓     │ │
│  │   3│        ▓▓▓     ▓▓▓     ▓▓▓     ▓▓▓     ▓▓▓     │ │
│  │   0│────────────────────────────────────────────────│ │
│  │      1月    2月    3月    4月    5月    6月          │ │
│  └────────────────────────────────────────────────────────┘ │
│                                                              │
│  [查看详细数据] [导出报告] [对话分析]                         │
└──────────────────────────────────────────────────────────────┘
```

**3. 相关方分析**

**分析维度：**

**数量统计：**

- 相关方总数

- 各类型相关方数量

- 本月新增相关方

- 合作中/已终止相关方

**审核分析：**

- 审核次数统计

- 合格率统计

- 不合格项分布

- 高频问题识别

**到期提醒：**

- 即将到期证件清单

- 到期证件类型分布

- 风险预警

**典型界面：**

```plaintext
┌──────────────────────────────────────────────────────────────┐
│  相关方分析                           时间范围: [本月▼]       │
├──────────────────────────────────────────────────────────────┤
│  【数据概览】                                                 │
│  ┌─────────────┬─────────────┬─────────────┬─────────────┐  │
│  │ 相关方总数  │ 本月审核    │ 审核合格率  │ 即将到期    │  │
│  │ 68家        │ 12家        │ 85%         │ 5项证件     │  │
│  └─────────────┴─────────────┴─────────────┴─────────────┘  │
│                                                              │
│  【相关方类型分布】        【审核合格率趋势】                 │
│  ┌──────────────────┐    ┌──────────────────────────────┐  │
│  │ 承包商  45家 66% │    │  100%│                        │  │
│  │ 供应商  18家 26% │    │   90%│    ●───●───●───●───●  │  │
│  │ 劳务    5家  8%  │    │   80%│                        │  │
│  └──────────────────┘    │   70%│                        │  │
│                          │   60%│                        │  │
│  【不合格项分布】        │   50%│                        │  │
│  ┌──────────────────┐    │     └──────────────────────│  │
│  │ 1. 证件过期  8次 │    │      1月  2月  3月  4月  5月 │  │
│  │ 2. 缺少材料  5次 │    └──────────────────────────────┘  │
│  │ 3. 制度不全  3次 │                                      │  │
│  │ 4. 人员不足  2次 │    【即将到期提醒】                   │  │
│  └──────────────────┘    ┌──────────────────────────────┐  │
│                          │ • XX公司安全许可证(30天后)   │  │
│                          │ • XX公司安全员证(15天后)     │  │
│                          │ • XX公司电工证(20天后)       │  │
│                          │ • ...                        │  │
│                          └──────────────────────────────┘  │
│                                                              │
│  [查看详细数据] [导出报告] [对话分析]                         │
└──────────────────────────────────────────────────────────────┘
```

#### 3.5.3 通用分析功能

**智能对话分析：**

- 用户可在任何统计页面调用对话框

- 用自然语言提问进行深度分析

- AI自动生成对应的统计图表

- 支持多维度交叉分析

**报告生成：**

- 一键生成周报/月报/年报

- 自动包含图表和分析结论

- 支持自定义报告模板

- 导出为Word/PDF格式

**数据钻取：**

- 点击图表某一项可查看明细数据

- 支持层层下钻分析

- 可快速跳转到数据台账查看原始记录

**对比分析：**

- 不同时间段对比（环比/同比）

- 不同区域对比

- 不同类型对比

- 可自定义对比维度

### 3.6 系统管理模块

#### 3.6.1 模块定位

系统管理模块提供产品运行的**基础配置和管理功能**，包括用户管理、权限管理、知识库管理等。

#### 3.6.2 账户管理

**用户管理：**

- 添加/编辑/删除用户

- 用户信息维护（姓名、手机、邮箱、部门）

- 用户状态管理（启用/禁用）

- 密码重置

**组织架构：**

- 部门管理（树形结构）

- 部门人员分配

- 支持多级组织架构

**登录日志：**

- 记录用户登录时间、IP、设备

- 异常登录提醒

- 登录统计分析

#### 3.6.3 角色管理

**预设角色：**

- 系统管理员：全部权限

- 安全管理员：隐患管理、统计分析、系统配置

- 安全员：隐患记录、数据查询

- 培训管理员：培训材料、题库管理

- 普通用户：基础查询权限

**自定义角色：**

- 创建自定义角色

- 灵活配置功能权限

- 数据权限控制（全部数据/本部门数据/本人数据）

**权限配置界面：**

```plaintext
┌──────────────────────────────────────────────────────────────┐
│  角色权限配置                                                 │
├──────────────────────────────────────────────────────────────┤
│  角色名称：[安全员                                ]           │
│  角色描述：[现场安全检查人员                      ]           │
│                                                              │
│  功能权限：                                                   │
│  ☑ 智能对话                                                  │
│    ☑ 拍照识别隐患                                            │
│    ☑ 生成课件                                                │
│    ☐ 资质审核                                                │
│  ☑ 数据台账                                                  │
│    ☑ 隐患台账（查看、新增、编辑）                            │
│    ☐ 题库（仅查看）                                          │
│    ☐ 相关方档案（无权限）                                    │
│  ☐ 统计管理                                                  │
│    ☐ 智能隐患分析（无权限）                                  │
│  ☐ 系统管理                                                  │
│                                                              │
│  数据权限：                                                   │
│  ◉ 本人创建的数据                                            │
│  ○ 本部门的数据                                              │
│  ○ 全部数据                                                  │
│                                                              │
│  [保存] [取消]                                               │
└──────────────────────────────────────────────────────────────┘
```

#### 3.6.4 知识管理

**知识库类型：**

- 法规标准库：法律法规、行业标准、企业标准

- 案例库：事故案例、典型隐患、经验教训

- 制度库：企业安全管理制度、作业规程

- 专家知识：企业积累的专业知识

**知识库管理：**

- 添加/编辑/删除知识条目

- 知识分类和标签

- 知识版本管理

- 知识质量审核

**知识库配置界面：**

```plaintext
┌──────────────────────────────────────────────────────────────┐
│  知识库管理                         [+添加知识] [批量导入]    │
├──────────────────────────────────────────────────────────────┤
│  [法规标准库] [案例库] [制度库] [专家知识]                   │
├──────────────────────────────────────────────────────────────┤
│ 分类          │ 标题                    │ 状态   │ 操作        │
├───────────────┼─────────────────────────┼────────┼─────────────┤
│ 法律法规      │ 中华人民共和国安全生产法│ ✅启用 │ 编辑│删除   │
│               │ （2021年修订版）        │        │             │
├───────────────┼─────────────────────────┼────────┼─────────────┤
│ 国家标准      │ 危险化学品重大危险源辨识│ ✅启用 │ 编辑│删除   │
│               │ GB 18218-2018          │        │             │
├───────────────┼─────────────────────────┼────────┼─────────────┤
│ 企业制度      │ 安全生产检查管理制度    │ ✅启用 │ 编辑│删除   │
├───────────────┼─────────────────────────┼────────┼─────────────┤
│ 事故案例      │ 某化工厂爆炸事故案例    │ ✅启用 │ 编辑│删除   │
└──────────────────────────────────────────────────────────────┘
```

**知识问答测试：**

- 在线测试知识库问答效果

- 模拟用户提问，检验AI回答质量

- 针对错误回答进行优化

#### 3.6.5 系统配置

**基础配置：**

- 企业信息设置（企业名称、logo、行业类型）

- 邮件服务配置（用于发送通知）

- 短信服务配置（用于紧急提醒）

- 存储配置（文件存储位置、容量管理）

**AI模型配置：**

- 选择AI模型供应商（如通义千问、文心一言等）

- API密钥配置

- 模型参数调优（温度、最大tokens等）

**业务配置：**

- 隐患等级定义（严重/中等/轻微的判断标准）

- 隐患类型定义（自定义隐患分类）

- 检查类型定义（日检/周检/月检等）

- 培训主题定义（消防/电气/机械等）

- 自定义字段（扩展数据结构）

**界面配置：**

- 主题颜色设置

- logo上传

- 欢迎语设置

- 快捷操作定制

## 四、关键用户流程

### 4.1 隐患识别与管理流程

**流程图：**

```plaintext
┌─────────────────────────────────────────────────────────────┐
│                     隐患识别与管理流程                       │
└─────────────────────────────────────────────────────────────┘
                              │
                    ┌─────────┴─────────┐
                    │  1. 发现疑似隐患   │
                    │  （现场巡检）     │
                    └─────────┬─────────┘
                              │
                    ┌─────────┴─────────┐
                    │  2. 拍照上传      │
                    │  （移动端APP）    │
                    └─────────┬─────────┘
                              │
                    ┌─────────┴─────────┐
                    │  3. AI识别分析    │
                    │  （智能视觉模块） │
                    └─────────┬─────────┘
                              │
                    ┌─────────┴─────────┐
                    │  4. 查看识别结果  │
                    │  （分级展示）     │
                    └─────────┬─────────┘
                              │
                    ┌─────────┴─────────┐
                    │  5. 确认和补充    │
                    │  （用户确认）     │
                    └─────────┬─────────┘
                              │
                    ┌─────────┴─────────┐
                    │  6. 查看整改建议  │
                    │  （知识问答模块） │
                    └─────────┬─────────┘
                              │
                    ┌─────────┴─────────┐
                    │  7. 保存记录      │
                    │  （隐患台账）     │
                    └─────────┬─────────┘
                              │
                    ┌─────────┴─────────┐
                    │  8. 后续处理      │
                    │  （导出/推送）    │
                    └───────────────────┘
```

**详细步骤说明：**

**步骤1：发现疑似隐患**

- 场景：安全员在A车间巡检时发现工人未戴安全帽

- 操作：决定使用AI助手记录

**步骤2：拍照上传**

- 打开移动端APP

- 点击"智能光标"-"拍照识别隐患"

- 拍摄现场照片（支持连拍多张）

- 可选：录制语音描述现场情况

**步骤3：AI识别分析**

- 系统显示"正在分析…"进度条

- AI视觉模块分析图片内容

- 识别人员、设备、环境状态

- 判断是否存在隐患

**步骤4：查看识别结果**

- 系统展示识别结果：

  ```plaintext
  识别到以下隐患：
🔴 严重隐患（1项）
1. 2名工人未佩戴安全帽
 位置：画面中部
 风险：物体打击风险
 
📸 已标注位置的图片
  ```

**步骤5：确认和补充**

- 用户确认识别结果准确

- 可选：补充现场信息

  - 所属区域：A车间西侧

  - 责任人：待确认

  - 现场描述：两名工人正在搬运物料

**步骤6：查看整改建议**

- 点击"查看整改建议"

- AI推荐整改措施：

  ```plaintext
  整改建议：
1. 立即要求工人佩戴安全帽
2. 对两名工人进行安全教育
3. 加强现场安全监督

法规依据：
《安全生产法》第45条：生产经营单位必须为从业人员提供符合国家标准或者行业标准的劳动防护用品，并监督、教育从业人员按照使用规则佩戴、使用。
  ```

**步骤7：保存记录**

- 点击"保存隐患记录"

- 系统自动生成隐患编号：HZ20241219001

- 记录保存到隐患台账

- 显示保存成功提示

**步骤8：后续处理**

- 选择后续操作：

  - 【生成整改通知】：AI自动生成整改通知书Word文档

  - 【关联责任人】：指定整改责任人

  - 【导出记录】：导出Excel供提交业务系统

  - 【继续巡检】：返回继续拍照识别

### 4.2 培训课件生成流程

**流程图：**

```plaintext
┌─────────────────────────────────────────────────────────────┐
│                     培训课件生成流程                         │
└─────────────────────────────────────────────────────────────┘
                              │
                    ┌─────────┴─────────┐
                    │  1. 打开对话窗口  │
                    │  （Web端）        │
                    └─────────┬─────────┘
                              │
                    ┌─────────┴─────────┐
                    │  2. 描述培训需求  │
                    │  （对话输入）     │
                    └─────────┬─────────┘
                              │
                    ┌─────────┴─────────┐
                    │  3. AI生成课件    │
                    │  （内容生成模块） │
                    └─────────┬─────────┘
                              │
                    ┌─────────┴─────────┐
                    │  4. 预览课件结构  │
                    │  （在线预览）     │
                    └─────────┬─────────┘
                              │
                    ┌─────────┴─────────┐
                    │  5. 进入创作中心  │
                    │  （精细编辑）     │
                    └─────────┬─────────┘
                              │
                    ┌─────────┴─────────┐
                    │  6. 保存和导出    │
                    │  （材料库）       │
                    └─────────┬─────────┘
                              │
                    ┌─────────┴─────────┐
                    │  7. 生成配套试题  │
                    │  （可选）         │
                    └───────────────────┘
```

**详细步骤说明：**

**步骤1：打开对话窗口**

- 场景：培训管理员需要准备下周的消防培训课件

- 操作：登录Web端，进入智能对话模块

**步骤2：描述培训需求**

- 输入：

  ```plaintext
  我需要准备一份消防安全培训课件，面向车间操作工，培训时长1小时，重点讲解灭火器使用和应急疏散。
  ```

- 可选：点击智能光标-"生成培训课件"，填写结构化表单

**步骤3：AI生成课件**

- AI确认需求：

  ```plaintext
  明白了，我来为您生成消防安全培训课件：
- 培训对象：车间操作工
- 培训时长：1小时
- 重点内容：灭火器使用、应急疏散

正在生成课件……
  ```

- 显示生成进度（预计2-3分钟）

**步骤4：预览课件结构**

- AI展示生成结果：

  ```plaintext
  ✅ 课件已生成完成

《车间消防安全培训》PPT课件（共30页）

内容结构：
1. 封面（1页）
2. 目录（1页）
3. 消防基础知识（5页）
 - 燃烧三要素
 - 火灾分类
 - 常见火灾原因
4. 灭火器使用方法（10页）
 - 灭火器类型识别
 - 操作步骤演示
 - 现场实操要点
 - 注意事项
5. 应急疏散演练（8页）
 - 疏散路线图
 - 逃生技巧
 - 常见错误
6. 案例分析（3页）
7. 总结（2页）

同时生成：
✅ 讲师演讲稿（Word文档）
✅ 学员培训手册（简化版）

[预览课件] [编辑课件] [直接下载] [生成试题]
  ```

**步骤5：进入创作中心**

- 点击"编辑课件"

- 自动跳转到内容创作中心

- 课件内容加载到画布

- 用户可进行精细编辑：

  - 调整页面顺序

  - 替换图片

  - 修改文字内容

  - 调整字体和配色

  - 添加动画效果

**步骤6：保存和导出**

- 点击"保存"，课件保存到培训材料库

- 材料自动打标签：#消防安全 #操作工培训 #1小时课程

- 点击"导出"，选择格式：

  - PPT格式（可编辑）

  - PDF格式（用于分发）

- 下载到本地

**步骤7：生成配套试题**

- 返回对话窗口

- 输入："为这份课件生成20道配套试题"

- AI生成试题：

  - 单选题：10道

  - 多选题：5道

  - 判断题：5道

- 试题自动保存到题库

- 可导出为Word试卷

### 4.3 相关方资质审核流程

**流程图：**

```plaintext
┌─────────────────────────────────────────────────────────────┐
│                     相关方资质审核流程                       │
└─────────────────────────────────────────────────────────────┘
                              │
                    ┌─────────┴─────────┐
                    │  1. 选择审核场景  │
                    │  （智能光标）     │
                    └─────────┬─────────┘
                              │
                    ┌─────────┴─────────┐
                    │  2. 上传资质材料  │
                    │  （批量上传）     │
                    └─────────┬─────────┘
                              │
                    ┌─────────┴─────────┐
                    │  3. AI识别审核    │
                    │  （视觉+知识）    │
                    └─────────┬─────────┘
                              │
                    ┌─────────┴─────────┐
                    │  4. 查看审核报告  │
                    │  （合格/不合格）  │
                    └─────────┬─────────┘
                              │
                    ┌─────────┴─────────┐
                    │  5. 确认和补充    │
                    │  （用户审核）     │
                    └─────────┬─────────┘
                              │
                    ┌─────────┴─────────┐
                    │  6. 保存档案      │
                    │  （相关方档案库） │
                    └─────────┬─────────┘
                              │
                    ┌─────────┴─────────┐
                    │  7. 生成协议      │
                    │  （可选）         │
                    └───────────────────┘
```

**详细步骤说明：**

**步骤1：选择审核场景**

- 场景：需要审核一家新承包商的资质

- 操作：点击智能光标-"资质材料审核"

- 选择相关方类型：承包商

**步骤2：上传资质材料**

- 填写基本信息：

  - 相关方名称：XX建筑公司

  - 作业内容：设备检修

  - 合作期限：2024-12-20 至 12-30

- 上传文件（支持拖拽或点击上传）：

  - 营业执照.pdf

  - 资质证书.pdf

  - 安全生产许可证.pdf

  - 人员证件1.jpg

  - 人员证件2.jpg

  - 人员证件3.jpg

- 系统自动识别文件类型，显示"✓已识别"

**步骤3：AI识别审核**

- 点击"开始审核"

- 系统显示审核进度：

  ```plaintext
  正在审核资质材料……
[████████░░░░] 60%
正在核验安全生产许可证有效期…
  ```

- AI执行审核逻辑：

  1. 证件识别：提取证件编号、有效期等信息

  2. 有效期核验：检查是否在有效期内

  3. 完整性检查：对照必需材料清单

  4. 合规性判断：基于法规和企业标准判断

**步骤4：查看审核报告**

- 系统展示审核结果：

  ```plaintext
  ✅ 审核完成

【审核结果概览】
合格项：4项
需关注：1项
不合格：1项

✅ 合格项（4项）
• 营业执照在有效期内（至2026年5月）
• 资质证书等级符合要求（三级）
• 安全生产许可证有效（至2025年8月）
• 项目经理持有建造师证（有效）

⚠️ 需关注（1项）
• 安全员证件即将到期（2025年1月到期）
建议：提前办理换证

❌ 不合格（1项）
• 缺少安全管理制度文件
要求：必须提供安全生产管理制度、应急预案等文件
法规依据：《安全生产法》第4条

【综合评估】
基本符合准入条件，但需补充1项必需材料。
建议要求承包商在3日内补充完善。
  ```

**步骤5：确认和补充**

- 用户审核AI的判断结果

- 可手工添加审核意见：

  ```plaintext
  补充意见：
该公司之前合作过一次，安全管理较规范，建议准入。但必须在进场前补齐安全管理制度文件。
  ```

- 修改审核结论（如需要）

**步骤6：保存档案**

- 点击"保存审核记录"

- 系统自动创建相关方档案：

  - 档案编号：XG20241219001

  - 所有材料归档

  - 审核记录保存

  - 设置到期提醒（安全员证件，2025年1月）

- 显示保存成功

**步骤7：生成协议**

- 点击"生成安全协议"

- 选择协议类型：承包商安全管理协议

- 选择条款内容：

  - ☑ 基础安全要求

  - ☑ 动火作业要求

  - ☑ 高处作业要求

  - ☐ 环保要求

- AI生成协议文档（Word格式）

- 预览、编辑、下载

### 4.4 监控画面分析流程

（详细流程参考"实时监控智能分析场景"文档）

**简要流程：**

```plaintext
监控专员发现疑似违规 → 截图/录像 → 上传AI分析 → 
AI识别违章行为 → 生成违章记录 → 保存台账 → 
选择处理方式（即时干预/事后处理）
```

## 五、技术架构设计

### 5.1 系统架构图

```plaintext
┌─────────────────────────────────────────────────────────────┐
│                          客户端层                            │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │  Web浏览器   │  │  iOS APP     │  │  Android APP │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                          接入层                              │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │  API网关     │  │  负载均衡    │  │  防火墙      │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                       应用服务层                             │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │  对话服务    │  │  场景服务    │  │  创作服务    │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │  台账服务    │  │  统计服务    │  │  系统服务    │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                       AI能力层                               │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │  大语言模型  │  │  视觉模型    │  │  知识库      │     │
│  │  (LLM API)   │  │  (Vision)    │  │  (RAG)       │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                       数据存储层                             │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │  业务数据库  │  │  文件存储    │  │  缓存        │     │
│  │  (MySQL)     │  │  (OSS)       │  │  (Redis)     │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
│  ┌──────────────┐  ┌──────────────┐                       │
│  │  向量数据库  │  │
```plaintext
│  │  (Milvus)    │  │  日志        │                       │
│  │              │  │  (ES)        │                       │
│  └──────────────┘  └──────────────┘                       │
└─────────────────────────────────────────────────────────────┘
```

### 5.2 核心技术选型

**前端技术：**

- Web端：React + TypeScript + Ant Design

- 移动端：React Native（iOS/Android共用代码）

- 富文本编辑器：Slate.js / ProseMirror

- 图表可视化：ECharts / D3.js

**后端技术：**

- 开发语言：Python (主要) / Java (辅助)

- Web框架：FastAPI / Flask

- 任务队列：Celery + Redis

- 接口文档：OpenAPI (Swagger)

**AI技术：**

- 大语言模型：通义千问 / 文心一言 / GPT（可配置）

- 视觉模型：通义千问-VL / GPT-4V

- 知识检索：RAG (检索增强生成)

- 向量数据库：Milvus / Faiss

**数据存储：**

- 关系数据库：MySQL 8.0

- 文件存储：阿里云OSS / AWS S3

- 缓存：Redis 6.0

- 向量数据库：Milvus

- 日志检索：Elasticsearch

**基础设施：**

- 容器化：Docker + Kubernetes

- CI/CD：GitLab CI / Jenkins

- 监控：Prometheus + Grafana

- 日志：ELK Stack

### 5.3 数据模型设计

#### 5.3.1 核心数据表

**用户表 (users)**

```sql
CREATE TABLE users (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    real_name VARCHAR(50),
    phone VARCHAR(20),
    email VARCHAR(100),
    department_id BIGINT,
    role_id BIGINT,
    status TINYINT DEFAULT 1, -- 1:启用 0:禁用
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_department (department_id),
    INDEX idx_role (role_id)
);
```

**隐患记录表 (hazards)**

```sql
CREATE TABLE hazards (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    hazard_no VARCHAR(50) UNIQUE NOT NULL, -- 隐患编号
    title VARCHAR(200) NOT NULL,
    description TEXT,
    hazard_type VARCHAR(50), -- 隐患类型
    risk_level VARCHAR(20), -- 风险等级：严重/中等/轻微
    area VARCHAR(100), -- 所属区域
    discover_method VARCHAR(50), -- 发现方式：现场检查/监控/表单识别
    discover_time TIMESTAMP,
    discoverer_id BIGINT,
    potential_consequence TEXT, -- 潜在后果
    regulation_basis TEXT, -- 法规依据
    rectification_suggestion TEXT, -- 整改建议
    acceptance_standard TEXT, -- 验收标准
    images JSON, -- 照片JSON数组
    tags JSON, -- 标签JSON数组
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_hazard_no (hazard_no),
    INDEX idx_risk_level (risk_level),
    INDEX idx_area (area),
    INDEX idx_discover_time (discover_time),
    INDEX idx_discoverer (discoverer_id)
);
```

**题库表 (questions)**

```sql
CREATE TABLE questions (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    question_no VARCHAR(50) UNIQUE,
    stem TEXT NOT NULL, -- 题干
    question_type VARCHAR(20), -- 题型：单选/多选/判断/简答
    options JSON, -- 选项（如适用）
    answer TEXT, -- 答案
    explanation TEXT, -- 解析
    regulation_basis TEXT, -- 法规依据
    knowledge_point VARCHAR(100), -- 知识点
    difficulty VARCHAR(20), -- 难度：基础/中等/较难
    target_audience VARCHAR(50), -- 适用对象
    usage_count INT DEFAULT 0, -- 使用次数
    last_used_at TIMESTAMP,
    created_by BIGINT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_question_type (question_type),
    INDEX idx_knowledge_point (knowledge_point),
    INDEX idx_difficulty (difficulty)
);
```

**培训材料表 (training_materials)**

```sql
CREATE TABLE training_materials (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    material_no VARCHAR(50) UNIQUE,
    title VARCHAR(200) NOT NULL,
    material_type VARCHAR(50), -- 材料类型：PPT/讲义/手册/视频
    training_topic VARCHAR(100), -- 培训主题
    target_audience VARCHAR(50), -- 适用对象
    suggested_duration INT, -- 建议时长（分钟）
    file_format VARCHAR(20),
    file_size BIGINT,
    file_path VARCHAR(500),
    page_count INT, -- 页数
    knowledge_tags JSON, -- 知识点标签
    download_count INT DEFAULT 0,
    last_used_at TIMESTAMP,
    created_by BIGINT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_material_type (material_type),
    INDEX idx_training_topic (training_topic)
);
```

**相关方档案表 (suppliers)**

```sql
CREATE TABLE suppliers (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    supplier_no VARCHAR(50) UNIQUE,
    name VARCHAR(200) NOT NULL,
    supplier_type VARCHAR(50), -- 类型：承包商/供应商/劳务公司
    contact_person VARCHAR(50),
    contact_phone VARCHAR(20),
    unified_social_credit_code VARCHAR(50), -- 统一社会信用代码
    cooperation_status VARCHAR(20), -- 合作状态：合作中/已终止
    risk_rating VARCHAR(20), -- 风险评级
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_supplier_type (supplier_type),
    INDEX idx_cooperation_status (cooperation_status)
);
```

**相关方审核记录表 (supplier_audits)**

```sql
CREATE TABLE supplier_audits (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    audit_no VARCHAR(50) UNIQUE,
    supplier_id BIGINT NOT NULL,
    audit_time TIMESTAMP,
    auditor_id BIGINT,
    audit_result VARCHAR(20), -- 审核结论：合格/不合格/待补充
    qualified_items JSON, -- 合格项
    unqualified_items JSON, -- 不合格项
    audit_report_path VARCHAR(500), -- 审核报告文件路径
    qualification_files JSON, -- 资质材料文件列表
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_supplier (supplier_id),
    INDEX idx_audit_time (audit_time),
    FOREIGN KEY (supplier_id) REFERENCES suppliers(id)
);
```

**对话记录表 (conversations)**

```sql
CREATE TABLE conversations (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    conversation_id VARCHAR(50) UNIQUE, -- 会话ID
    user_id BIGINT NOT NULL,
    title VARCHAR(200), -- 会话标题
    last_message_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_user (user_id),
    INDEX idx_conversation_id (conversation_id)
);
```

**对话消息表 (messages)**

```sql
CREATE TABLE messages (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    conversation_id VARCHAR(50) NOT NULL,
    role VARCHAR(20), -- 角色：user/assistant
    content TEXT, -- 消息内容
    attachments JSON, -- 附件（图片、文件等）
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_conversation (conversation_id),
    FOREIGN KEY (conversation_id) REFERENCES conversations(conversation_id)
);
```

#### 5.3.2 数据库设计说明

**设计原则：**

1. 数据结构标准化，避免冗余

2. 合理使用索引，优化查询性能

3. JSON字段用于存储灵活的非结构化数据（如标签、选项等）

4. 时间字段统一使用TIMESTAMP类型

5. 外键约束保证数据完整性

**扩展性设计：**

- 使用JSON字段存储可变的标签和属性

- 预留扩展字段（如custom_fields）

- 支持企业自定义数据结构

**性能优化：**

- 高频查询字段建立索引

- 分离冷热数据（历史数据归档）

- 使用缓存减少数据库压力

- 大字段（如TEXT）存储在单独表中

### 5.4 接口设计规范

#### 5.4.1 RESTful API设计

**基本规范：**

- 使用RESTful风格

- 统一使用JSON格式

- 使用标准HTTP状态码

- 接口版本化（如 /api/v1/）

**请求格式：**

```json
{
    "method": "POST",
    "url": "/api/v1/hazards",
    "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer <token>"
    },
    "body": {
        "title": "高处作业未系安全带",
        "area": "A车间",
        "images": ["image_url1", "image_url2"]
    }
}
</token>
```

**响应格式：**

```json
{
    "code": 200,
    "message": "success",
    "data": {
        "id": 12345,
        "hazard_no": "HZ20241219001",
        "created_at": "2024-12-19 14:30:00"
    },
    "timestamp": 1702971000
}
```

**错误响应：**

```json
{
    "code": 400,
    "message": "参数错误：area字段不能为空",
    "data": null,
    "timestamp": 1702971000
}
```

#### 5.4.2 核心API清单

**用户认证：**

- `POST /api/v1/auth/login` - 用户登录

- `POST /api/v1/auth/logout` - 用户登出

- `POST /api/v1/auth/refresh-token` - 刷新token

**对话服务：**

- `POST /api/v1/conversations` - 创建会话

- `GET /api/v1/conversations` - 获取会话列表

- `POST /api/v1/conversations/{id}/messages` - 发送消息

- `GET /api/v1/conversations/{id}/messages` - 获取消息历史

**AI能力调用：**

- `POST /api/v1/ai/image-recognition` - 图片识别

- `POST /api/v1/ai/knowledge-qa` - 知识问答

- `POST /api/v1/ai/content-generate` - 内容生成

- `POST /api/v1/ai/data-analysis` - 数据分析

**隐患管理：**

- `POST /api/v1/hazards` - 创建隐患记录

- `GET /api/v1/hazards` - 查询隐患列表

- `GET /api/v1/hazards/{id}` - 获取隐患详情

- `PUT /api/v1/hazards/{id}` - 更新隐患记录

- `DELETE /api/v1/hazards/{id}` - 删除隐患记录

- `GET /api/v1/hazards/export` - 导出隐患数据

**题库管理：**

- `POST /api/v1/questions` - 创建题目

- `GET /api/v1/questions` - 查询题目列表

- `POST /api/v1/questions/batch-generate` - 批量生成题目

- `POST /api/v1/questions/compose-paper` - 智能组卷

- `GET /api/v1/questions/export` - 导出题目

**培训材料：**

- `POST /api/v1/materials` - 上传培训材料

- `GET /api/v1/materials` - 查询材料列表

- `GET /api/v1/materials/{id}` - 获取材料详情

- `GET /api/v1/materials/{id}/download` - 下载材料

**相关方管理：**

- `POST /api/v1/suppliers` - 创建相关方档案

- `GET /api/v1/suppliers` - 查询相关方列表

- `POST /api/v1/suppliers/{id}/audits` - 创建审核记录

- `GET /api/v1/suppliers/{id}/audits` - 查询审核历史

**统计分析：**

- `GET /api/v1/statistics/hazards` - 隐患统计分析

- `GET /api/v1/statistics/training` - 培训统计分析

- `GET /api/v1/statistics/suppliers` - 相关方统计分析

- `POST /api/v1/statistics/report` - 生成统计报告

### 5.5 安全设计

**认证授权：**

- JWT Token认证机制

- Token过期时间：2小时（可配置）

- Refresh Token机制

- 基于角色的权限控制(RBAC)

**数据安全：**

- 敏感数据加密存储（如密码）

- HTTPS加密传输

- 文件上传安全校验（格式、大小、内容）

- SQL注入防护

- XSS攻击防护

**操作审计：**

- 记录关键操作日志

- 登录日志记录

- 数据变更记录

- 日志不可篡改

**隐私保护：**

- 遵循数据最小化原则

- 用户数据授权访问

- 支持数据导出和删除

- 符合数据安全法规要求

## 六、分阶段实施路线图

### 6.1 MVP版本（Phase 1，1-2个月）

**目标：**快速上线核心功能，验证产品价值

**功能范围：**

**✅ 智能对话模块（基础版）**

- 文字、语音、图片输入

- 文字输出和简单操作建议

- 对话历史记录

**✅ 场景分析（核心场景）**

- 智能隐患分析：

  - 现场拍照识别隐患

  - 隐患描述生成

  - 整改建议推荐

- 教育培训分析：

  - 批量生成试题（基础）

- 相关方分析：

  - 资质材料审核（基础）

**✅ 数据台账（轻量版）**

- 隐患台账：查询、导出

- 题库：查询、导出

- 相关方档案：查询、导出

**✅ 系统管理（基础）**

- 用户管理

- 角色权限管理

- 知识库管理（预置标准知识）

**🔧 技术实现：**

- 调用通义千问API

- MySQL数据库

- 阿里云OSS文件存储

- 基础Web端界面

**📊 验证指标：**

- 隐患识别准确率 > 80%

- 用户操作完成率 > 70%

- 平均识别时间 < 30秒

### 6.2 正式版本（Phase 2，2-3个月）

**目标：**完善功能体验，提升产品成熟度

**新增功能：**

**✅ 智能对话模块（增强版）**

- 智能光标（快捷入口）

- 图表展示

- 文档生成和下载

- 对话上下文优化

**✅ 内容创作中心**

- 培训课件画布式编辑

- 侧边栏AI助手

- 模板库

- 导出PPT/Word/PDF

**✅ 场景分析（完整版）**

- 智能隐患分析：

  - 检查表单识别

  - 监控画面分析

- 教育培训分析：

  - 生成培训课件（完整流程）

  - 智能组卷

- 相关方分析：

  - 生成安全协议

  - 历史审核对比

**✅ 数据台账（完善版）**

- 所有台账的完整CRUD功能

- 高级筛选和搜索

- 批量导入/导出

- 自定义字段（可选）

**✅ 统计管理**

- 三大场景专项分析

- 数据可视化图表

- 对话式数据分析

- 报告生成

**✅ 移动端APP**

- iOS/Android原生APP

- 核心功能移动化

- 离线使用支持（部分功能）

**🔧 技术实现：**

- 优化AI模型调用

- 引入向量数据库（Milvus）

- Redis缓存优化

- 移动端开发（React Native）

**📊 验证指标：**

- 识别准确率 > 90%

- 用户满意度 > 85%

- 系统响应时间 < 5秒

### 6.3 增强版本（Phase 3，3-4个月）

**目标：**深度优化和扩展能力

**新增功能：**

**✅ AI能力升级**

- 企业专属模型微调

- 多模态融合（图片+文字+视频）

- 实时视频分析（可选）

- 更精准的知识检索

**✅ 数据分析深化**

- 智能预警和风险预测

- 根因分析

- 趋势预测

- 对比基准分析

**✅ 协作功能**

- 多人协同编辑

- 评论和批注

- 任务分配（轻量级）

- 消息通知

**✅ 集成能力**

- 完整的API接口体系

- Webhook推送机制

- 与第三方系统对接示例

- SDK开发包

**✅ 移动端增强**

- 离线模式完善

- 语音交互优化

- AR辅助识别（探索）

**🔧 技术实现：**

- 模型微调和优化

- 实时数据流处理

- WebSocket实时通信

- 性能调优

**📊 验证指标：**

- 企业专属模型准确率 > 95%

- 系统并发能力 > 1000用户

- 集成案例 > 5个

### 6.4 企业版本（Phase 4，持续迭代）

**目标：**满足大型企业复杂需求

**新增功能：**

**✅ 私有化部署支持**

- 完整的私有化部署方案

- 本地模型部署选项

- 数据安全隔离

- 定制化开发服务

**✅ 高级分析能力**

- 大数据分析平台

- 自定义分析模型

- 智能决策建议

- 行业对标分析

**✅ 扩展场景**

- 作业票管理（可选）

- 设备巡检（可选）

- 应急演练（可选）

- 更多垂直场景

**✅ 生态建设**

- 开放平台

- 插件市场

- 开发者社区

- 合作伙伴体系

## 七、产品成功关键因素

### 7.1 产品层面

**1. AI能力的准确性和稳定性**

- 持续优化模型效果

- 积累高质量训练数据

- 建立反馈闭环机制

**2. 用户体验的流畅性**

- 简化操作流程

- 降低学习成本

- 快速响应和反馈

**3. 产品边界的清晰界定**

- 明确做什么、不做什么

- 与业务系统良好配合

- 避免功能泛滥

### 7.2 技术层面

**1. AI技术选型的合理性**

- 选择成熟稳定的大模型

- 平衡效果和成本

- 保持技术灵活性

**2. 架构的可扩展性**

- 模块化设计

- 松耦合架构

- 支持快速迭代

**3. 数据安全和隐私保护**

- 符合法规要求

- 数据加密和隔离

- 审计和追溯

### 7.3 运营层面

**1. 快速验证和迭代**

- MVP快速上线

- 收集用户反馈

- 持续优化改进

**2. 用户培训和支持**

- 提供详细使用文档

- 在线培训课程

- 及时响应问题

**3. 生态合作和推广**

- 与业务系统厂商合作

- 行业案例积累

- 口碑传播

## 八、风险与应对

### 8.1 技术风险

**风险1：AI模型效果不达预期**

- 应对：选择多个模型备选，建立效果评估机制，持续优化

- 预案：提供人工审核和修正功能，确保结果可用

**风险2：系统性能问题**

- 应对：合理架构设计，负载测试，性能优化

- 预案：限流、降级、扩容方案

**风险3：第三方API不稳定**

- 应对：多API供应商备选，本地缓存，容错机制

- 预案：降级到本地模型或人工处理

### 8.2 产品风险

**风险1：用户接受度低**

- 应对：充分用户调研，MVP快速验证，持续优化体验

- 预案：调整产品定位和功能范围

**风险2：与现有系统冲突**

- 应对：明确产品边界，提供灵活集成方案，不替代业务系统

- 预案：提供更轻量的嵌入式组件

**风险3：功能范围蔓延**

- 应对：严格控制产品边界，聚焦核心价值

- 预案：通过集成能力满足扩展需求

### 8.3 业务风险

**风险1：市场竞争加剧**

- 应对：快速迭代，建立差异化优势，积累行业know-how

- 预案：深耕垂直行业，建立壁垒

**风险2：商业模式不清晰**

- 应对：探索多种商业模式，验证付费意愿

- 预案：调整定价策略，提供增值服务

**风险3：客户复购率低**

- 应对：持续提供价值，建立用户粘性，数据积累形成壁垒

- 预案：开发更多场景，扩大使用范围

---

**文档版本**：V1.0\
**编制日期**：2024年12月19日\
**文档性质**：产品设计规格说明书\
**关联文档**：

- 《安全生产AI大模型产品矩阵方案》

- 《智能隐患识别场景 - 落地场景库》

- 《教育培训场景 - 落地场景库》

- 《相关方管理场景 - 落地场景库》

- 《实时监控智能分析场景 - 落地场景库》