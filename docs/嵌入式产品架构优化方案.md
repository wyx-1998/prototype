# 嵌入式产品架构优化方案

## 1. 概述

基于当前PC端产品的完整功能架构，本方案旨在从产品经理角度优化嵌入式产品的架构设计，使其既能保持轻量化特性，又能提供与PC端一致的核心功能体验。通过合理的架构设计，实现嵌入式组件与第三方系统的无缝集成，提升用户在不同场景下的使用效率。

## 2. 产品现状分析

### 2.1 PC端产品优势
1. **功能完整**：涵盖工作台、智能对话、创作中心、数据台账、统计分析五大核心模块
2. **体验优秀**：统一的导航结构和模块化设计，用户操作流畅
3. **扩展性强**：响应式布局适配不同设备，便于功能迭代

### 2.2 嵌入式产品现状

#### 2.2.1 现有实现
当前嵌入式产品通过`embedded_demo.html`文件实现了一个简化版的聊天界面：
1. **固定侧边栏**：右侧固定位置的聊天窗口
2. **基础交互**：简单的消息发送和回复功能
3. **场景模拟**：预设了设备维护台账的使用场景

#### 2.2.2 存在的问题
1. **功能受限**：仅实现了基础聊天功能，无法满足用户复杂需求
2. **体验割裂**：与PC端功能不一致，用户需要切换平台
3. **集成困难**：缺少与业务系统的深度整合能力
4. **扩展性差**：难以根据不同业务场景进行个性化定制

## 3. 产品目标与定位

### 3.1 产品目标
1. **功能对齐**：嵌入式组件应具备PC端核心功能，确保用户体验一致性
2. **轻量集成**：保持组件小巧高效，不影响宿主系统性能
3. **场景适配**：支持根据不同业务场景进行灵活配置
4. **无缝协作**：实现与PC端产品的数据和状态同步

### 3.2 产品定位
嵌入式产品作为PC端产品的轻量化延伸，服务于以下场景：
1. **业务系统集成**：在ERP、OA等系统中直接使用AI能力
2. **现场作业支持**：在移动端或特定工作界面中快速调用AI助手
3. **专题场景应用**：针对特定业务场景提供定制化功能

### 3.3 用户价值
1. **效率提升**：用户无需切换系统即可使用AI能力
2. **体验一致**：保持与PC端一致的操作习惯和功能体验
3. **成本降低**：减少系统切换和重复学习的成本
4. **灵活性增强**：支持在不同场景下快速部署和使用

## 4. 产品功能规划

### 4.1 功能模块设计

#### 4.1.1 智能对话模块（核心）
**功能定位**：提供与PC端一致的智能对话能力

**核心能力**：
1. **多模态交互**：支持文本、图片、文件等多种输入方式
2. **上下文感知**：自动识别当前页面内容和业务场景
3. **场景适配**：根据不同业务场景提供定制化快捷操作
4. **丰富回复**：支持文本、卡片、图表等多种回复形式

#### 4.1.2 创作中心模块（简化版）
**功能定位**：提供轻量级的内容创作能力

**核心功能**：
1. **快速编辑**：基础文本编辑和格式化功能
2. **模板应用**：常用文档模板快速套用
3. **一键导出**：支持导出到多种格式和第三方系统

#### 4.1.3 数据台账模块（集成版）
**功能定位**：与业务系统数据联动

**核心功能**：
1. **数据查询**：快速查询相关业务数据
2. **表单录入**：简化版数据录入界面
3. **状态同步**：与PC端数据台账保持同步

### 4.2 产品形态设计

#### 4.2.1 多种展现形式
1. **侧边栏模式**：固定在页面边缘的聊天窗口
2. **浮动窗口模式**：可拖拽的悬浮窗口
3. **全屏模式**：独立的全屏应用界面

#### 4.2.2 个性化配置
1. **尺寸自适应**：支持不同尺寸的展示需求
2. **主题切换**：明暗主题适配不同使用环境
3. **位置调整**：支持左、右、底部等不同停靠位置

## 5. 集成与部署方案

### 5.1 集成方式

#### 5.1.1 标准集成接口
为便于第三方系统集成，提供以下标准接口：

1. **上下文获取接口**：
   - 获取当前页面URL、标题、选中文本等信息
   - 读取页面元数据和业务标识

2. **消息通信接口**：
   - 发送用户消息到AI助手
   - 接收AI助手的回复消息
   - 监听系统事件和状态变化

3. **数据同步接口**：
   - 同步业务数据到AI系统
   - 从AI系统获取处理结果
   - 实现双向数据流动

#### 5.1.2 事件通知机制
1. **用户操作事件**：用户在嵌入组件中的操作行为
2. **系统状态事件**：组件加载、卸载、异常等状态变化
3. **业务数据事件**：与业务相关的数据变更和处理结果

### 5.2 部署方案

#### 5.2.1 多种部署方式
1. **NPM包引入**：适用于现代前端项目，支持模块化管理
2. **CDN链接引入**：适用于传统项目，简单快速集成
3. **源码集成**：适用于有定制化需求的项目

#### 5.2.2 配置化部署
1. **功能模块配置**：按需选择需要的功能模块
2. **样式主题配置**：根据宿主系统风格进行定制
3. **交互行为配置**：调整组件的交互方式和响应行为
